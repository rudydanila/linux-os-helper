**Лабораторная работа № 17**  
**Тема:  "Структура файловой системы ОС Linux"**  
Цель:  ознакомиться со структурой файловой системы; командами управления файловой системой Linux

**Порядок выполнения работы:**   
1\. Изучить теоретические сведения  
2\. Выполнить задания  
3\. Ответить на контрольные вопросы  
4\. Оформить отчет

**Основные теоретические сведения**  
Файловая система ОС Линукс (как и прочих unix-подобных систем) устроена так, что все ресурсы представлены единообразно, в виде файлов. Такой подход позволяет обеспечить универсальный интерфейс доступа к любым ресурсам: от физических устройств, до процессов, выполняющихся в системе. С точки зрения пользователя файловая система представляет логическую структуру каталогов и файлов.   
Структура и назначение каждого из каталогов, созданных на этапе установке предопределены, хотя и могут быть (что не стоит делать без крайней необходимости) изменены суперпользователем.  
Файловая система имеет иерархическую структуру и начинается от корневого каталога (**/**). Его подкаталогами являются:

* **/bin** - исполняемые файлы общего назначения;  
* **/boot** - содержит образ загружаемого ядра;  
* **/dev** - файлы устройств;  
* **/etc** - конфигурационные файлы общего пользования;  
* **/home** - домашние каталоги пользователей, включая программы и файлы личных предпочтений;  
* **/lib** - общесистемные библиотеки;  
* **/mnt** - каталог монтирования внешних файловых систем;  
* **/proc** - виртуальная файловая система для чтения информации о процессах;  
* **/root** - домашний каталог суперпользователя;  
* **/sbin** - программы системного администрирования;  
* **/tmp** - каталог для хранения временной информации;  
* **/usr** - каталог пользовательских прикладных программ со всеми их исполнимыми и конфигурационными файлами. Например, в подкаталог /usr/local инсталлируются программы, не входящие в дистрибутив Линукс, или собираемые из исходных текстов.  
* **/var** - каталог для хранения часто изменяющихся файлов. Например, различных лог-файлов, почтовых сообщений и т.п.  
* **/lost+found** - каталог для нарушенных фрагментов файлов, обнаруженных в результате проверки файловой системы после сбоя.

***Основными командами для выполнения файловых операций*** являются: `pwd, ls, cp, mv, dir, rm, cd, rmdir, mvdir, mkdir, ln.` Информацию о их назначении и параметрах доступна в формате man и info.  
Способы создания файлов в Линукс:

* файлы могут быть созданы как результаты работы прикладных программ и иметь определенный формат (например, графические файлы, созданные редактором GIMP);  
* файлы могут быть созданы пользователем путем ввода информации с клавиатуры, например так:

`aag@stilo:\~\> cat \> f1`  
`Hello, world\! // *нажатие Ctrl+D завершает ввод команд*`

* файлы могут быть созданы путем перенаправления вывода команды со стандартного потока, например так:  
  `\[root@localhost aag\]\# echo "Hello, World\!" \> f1 
`
Символ "\>" \- это команда перенаправления стандартных потоков ввода/вывода, встроенная в оболочку. Она может получать информацию со стандартного потока ввода (клавиатура) и, по окончании ввода (Ctrl+D), отправляет ее в файл. Также команда может принимает строку, переданную командой echo и также отправляет ее в файл.   
Если файл отсутствует, то он будет создан, если имеется, то будет перезаписан. Для добавления информации в файл следует использовать команду "\>\>". Больше информации о командах перенаправления можно получить в справке о возможностях оболочки.

***Таблица основных команд Linux и их аналоги в DOS***

| Команда Linux | Действие | Аналог в DOS |
| ----- | ----- | ----- |
|  ls, dir  |  Вывод на экран информации о файлах и каталогах  |   dir  |
|  cd  |  Смена текущего каталога  |   cd  |
|   pwd   |  Текущий каталог  |   \-  |
|   cp   |  Копирование файлов в другой каталог и/или с другим именем  |   copy  |
|  mv  |  Перенос файла и переименование его  |   ove, rename  |
|  rm  |  Удаление файла  |   del  |
|  mkdir  |  Создание каталога  |   mcdir, md  |
|  rm  |  Удаление каталога  |   rm, rmdir  |
|  man  |  Вывод помощи (по командам ОС)  |   help  |
|  more  |  Вывод содержимого файла на экран с паузами после заполнения каждого экрана  |   more  |
|  cat filename  |  Вывод на экран содержимого файла nbsp |   type  |
|  cat \> Newfilename  |  ВПеренаправление содержимого файла в новый файл/создание нового файла с заданым в другом файле содержимым  |   \-  |
|  Ctrl+D  |  Окончание перенаправления  |   \-  |
|  grep  |  Поиск строк в файле, соответствующих запросу  |   \-  |
|  chmode  |  Смена атрибутов файла  |   atrib  |
|  chown  |  Смена владельца файла  |   \-  |
|  df  |  Вывод информации о наличии свободного места на диске  |   dir  |
|  find  |  Поиск и вывод на экран имен файлов, соответствующих заданным критериямnbsp |   \-  |
|  file  |  Вывод информации о файле  |   \-  |
|  vc  |  Подсчет слов или знаков в файле  |   \-  |

** **  
***Опции команд***  
Большинство команд имеет многочисленные опции. Опция вводится с помощью "-" (тире). Например:  
`dir-l  `
показывает список файлов в текущем каталоге, но в расширенном формате (по умолчанию формат вывода "короткий"). Если надо ввести более одной опции, то можно их объединить, эти варианты эквивалентны:  
`dir \-l -a` или `dir \-la  `
** **Любая из двух команд покажет мне список файлов в текущем каталоге в расширенном формате (опция \-l), и включит все файлы в список ,также и скрытые (опция \-a). Большинство часто используемых опций обозначены одной буквой, как и в UNIX. Но есть и новый стиль, который выглядит так: `dir --help  `
Это \- опция длиной более одного символа, и она должна начинаться с двойного тире. Вышеуказанная команда показывает краткую помощь для команды dir, включая список всех опций. Так как их очень много (более одного экрана), лучше ввести эту команду так: dir --help | more

**Практическое задание** 

1. Вывести на экран список файлов текущего каталога в краткой и расширенной форме  
2. Переместиться в каталог /  
3. Сохранить в файле `$HOME/filelist.lst` список каталогов в каталоге /  
4. Вернуться в домашний каталог и вывести список всех (в т.ч. и скрытых) файлов и каталогов  
5. В домашнем каталоге создать подкаталоги src, dst и temp  
6. В каталоге src создать текстовый файл f1 произвольного содержания    
7. Создать файлы user.txt (с вашей фамилией) и stud.txt (с вашей группой).  
8. В каталог src скопировать файлы user.txt, stud.txt.   
9. В каталоге dst создать «жесткие» ссылки на все файлы из каталога src  
10. В домашнем каталоге создать «мягкие» ссылки на файлы из каталога src  
11. Вывести расширенную информацию о содержимом домашнего каталога. Обратить внимание на поле размера для физических файлов и ссылок  
12. Из домашнего каталога выполнить команды:  
`    * cat /src/f1  
    * cat /dst/f1  
    * cat /f1  `
13. Переместить файл f1 из каталога src в каталог temp   
14. Удалить файл f1   
15. Удалить все файлы, имеющие в названии txt из каталога dst  
16. Удалить каталог dst  
17. Переместить каталог temp в src  
18. Удалить каталог src.  
19. Ознакомиться с опциями команды fdisk (с помощью  man)  
20. Получить информацию о разделах с помощью вызова fdisk.  
21. Получить информацию о разделах с помощью команды cfdisk.  
22. Определить количество свободного места на диске (df)  
23. Определить, какие устройства хранения информации автоматически подключаются (монтируются) в вашей системе (cat /etc/fstab)  
24. Определить, какие файловые системы смонтированы в системе (cat /etc/mtab).  
25. Используя команду mount, получить список смонтированных файловых систем.

**Контрольные вопросы:**

1. Совпадает ли размер символьных и жестких ссылок?  
2. Какой командой можно удалить непустой каталог?  
3. Какой каталог будет установлен текущим сразу же после входа пользователя в систему?  
4. Перечислите опции команд cat, file , pwd    
5. Перечислите основные задачи администрирования файловых систем.  
6. Что такое монтирование?  
7. Какая команда используется для монтирования файловой системы? Что при этом указывается?  
8. Какими правами нужно обладать для выполнения команды mount?  
9. Для чего служат команды fdisk, сfdisk?  
10. Как получить информацию об использовании дискового пространства смонтированных файловых системах?